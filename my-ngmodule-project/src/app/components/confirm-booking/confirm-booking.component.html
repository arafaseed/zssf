<h2 class="text-2xl font-roboto font-bold text-green-900 m-5">
  Confirm Booking Details
</h2>

<mat-dialog-content class="space-y-6">
  <!-- Venue -->
  <div class="p-4 rounded-2xl bg-green-50 shadow-sm">
    <h4 class="font-semibold text-green-700">Venue</h4>
    <p class="text-base text-gray-700 mt-1">{{ data.venueName }}</p>
  </div>

  <!-- Dates & Times -->
  <div class="p-4 rounded-2xl bg-green-50 shadow-sm space-y-2">
    <h4 class="font-semibold text-green-700">Dates & Times</h4>
    <p class="text-base text-gray-700"><strong>From (Date):</strong> {{ data.booking.startDate }}</p>
    <p class="text-base text-gray-700"><strong>From (Time):</strong> {{ data.booking.startTime }}</p>
    <p class="text-base text-gray-700"><strong>To (Date):</strong> {{ data.booking.endDate }}</p>
    <p class="text-base text-gray-700"><strong>To (Time):</strong> {{ data.booking.endTime }}</p>
  </div>

  <!-- Activity -->
  <div class="p-4 rounded-2xl bg-green-50 shadow-sm space-y-1">
    <h4 class="font-semibold text-green-700">Activity & Service</h4>
    <p class="text-base text-gray-700">
      <strong>Activity / Purpose:</strong> {{ data.booking.venueActivityId || '—' }}
    </p>
    <ng-container *ngIf="data.selectedOptionalService; else noOptionalService">
      <p class="text-base text-gray-700">
        <strong>Optional Service:</strong>
        {{ data.selectedOptionalService.optionalServiceName || data.selectedOptionalService.serviceName }}
        — {{ data.selectedOptionalService.price | number:'1.0-0' }} TZS
      </p>
    </ng-container>
    <ng-template #noOptionalService>
      <p class="text-base text-gray-700"><strong>Optional Service ID:</strong> {{ data.booking.venueOptionalServiceId || '—' }}</p>
    </ng-template>
  </div>

  <!-- Customer -->
  <div class="p-4 rounded-2xl bg-green-50 shadow-sm space-y-1">
    <h4 class="font-semibold text-green-700">Customer</h4>
    <p class="text-base text-gray-700"><strong>Name:</strong> {{ data.booking.customer?.customerName }}</p>
    <p class="text-base text-gray-700"><strong>Phone:</strong> {{ data.booking.customer?.phoneNumber }}</p>
    <p class="text-base text-gray-700"><strong>Email:</strong> {{ data.booking.customer?.email }}</p>
    <p class="text-base text-gray-700"><strong>Address:</strong> {{ data.booking.customer?.address }}</p>
    <p class="text-base text-gray-700"><strong>Customer type:</strong> {{ data.booking.customer?.customerType }}</p>
  </div>

  <!-- Attached File -->
  <div class="p-4 rounded-2xl bg-green-50 shadow-sm">
    <h4 class="font-semibold text-green-700">Attached Document</h4>
    <p *ngIf="data.attachedFile?.name; else noFile" class="text-base text-gray-700">
      {{ data.attachedFile.name }}
    </p>
    <ng-template #noFile>
      <p class="text-base text-gray-500 italic">No file attached</p>
    </ng-template>
  </div>

  <!-- Summary -->
  <div class="p-4 rounded-2xl bg-green-50 shadow-sm">
    <h4 class="font-semibold text-green-700">Summary</h4>
    <p class="text-base text-gray-700">
      <strong>Discount rate:</strong> {{ data.booking.discountRate || 0 }}
    </p>
  </div>

  <!-- Error -->
  <div *ngIf="errorMessage" class="text-sm font-medium text-red-600 mt-2">
    {{ errorMessage }}
  </div>

  <!-- Terms Checkbox -->
  <mat-checkbox [(ngModel)]="accepted" class="mt-3 text-gray-700">
    I accept the
    <a href="/agreeterms" target="_blank" class="text-green-600 underline">
      terms & conditions
    </a>
  </mat-checkbox>
</mat-dialog-content>

<!-- Actions -->
<mat-dialog-actions align="end" class="mt-6 space-x-3">
  <button mat-button (click)="close(false)" [disabled]="submitting"
    class="rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-100 px-4 py-2">
    Cancel
  </button>
  <button mat-flat-button color="primary" (click)="confirmAndSubmit()" 
    [disabled]="!accepted || submitting"
    class="rounded-lg bg-green-500 hover:bg-green-600 text-white px-4 py-2 font-medium">
    <span *ngIf="!submitting">Confirm & Submit</span>
    <span *ngIf="submitting" class="flex items-center">
      <mat-progress-spinner diameter="18" mode="indeterminate"></mat-progress-spinner>
      &nbsp;Submitting...
    </span>
  </button>
</mat-dialog-actions>
