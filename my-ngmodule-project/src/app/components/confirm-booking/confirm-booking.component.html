<h2 class="m-5 text-2xl font-bold text-green-900 font-roboto">
  Confirm Booking Details
</h2>

<mat-dialog-content class="space-y-6">
  <!-- Venue -->
  <div class="p-4 shadow-sm rounded-2xl bg-green-50">
    <h4 class="font-semibold text-green-700">Venue</h4>
    <p class="mt-1 text-base text-gray-700">{{ data.venueName }}</p>
  </div>

  <!-- Dates & Times -->
  <div class="p-4 space-y-2 shadow-sm rounded-2xl bg-green-50">
    <h4 class="font-semibold text-green-700">Dates & Times</h4>
    <p class="text-base text-gray-700"><strong>From (Date):</strong> {{ data.booking.startDate }}</p>
    <p class="text-base text-gray-700"><strong>From (Time):</strong> {{ data.booking.startTime }}</p>
    <p class="text-base text-gray-700"><strong>To (Date):</strong> {{ data.booking.endDate }}</p>
    <p class="text-base text-gray-700"><strong>To (Time):</strong> {{ data.booking.endTime }}</p>
  </div>

  <!-- Activity -->
  <div class="p-4 space-y-1 shadow-sm rounded-2xl bg-green-50">
    <h4 class="font-semibold text-green-700">Activity & Service</h4>
    <p class="text-base text-gray-700">
      <strong>Activity / Purpose:</strong> 
      {{ data.booking.venueActivityName || '—' }}
      — {{ data.booking.venueActivityPrice | number:'1.0-0' }} TZS /Day
    </p>
    <ng-container *ngIf="data.selectedOptionalService; else noOptionalService">
      <p class="text-base text-gray-700">
        <strong>Optional Service:</strong>
        {{ data.selectedOptionalService.optionalServiceName || data.selectedOptionalService.serviceName }}
        — {{ data.selectedOptionalService.price | number:'1.0-0' }} TZS
      </p>
    </ng-container>
    <ng-template #noOptionalService>
      <p class="text-base text-gray-700"><strong>Optional Service ID:</strong> {{ data.booking.venueOptionalServiceId || '—' }}</p>
    </ng-template>
  </div>

  <!-- Customer -->
  <div class="p-4 space-y-1 shadow-sm rounded-2xl bg-green-50">
    <h4 class="font-semibold text-green-700">Customer</h4>
    <p class="text-base text-gray-700"><strong>Name:</strong> {{ data.booking.customer?.customerName }}</p>
    <p class="text-base text-gray-700"><strong>Phone:</strong> {{ data.booking.customer?.phoneNumber }}</p>
    <p class="text-base text-gray-700"><strong>Email:</strong> {{ data.booking.customer?.email }}</p>
    <p class="text-base text-gray-700"><strong>Address:</strong> {{ data.booking.customer?.address }}</p>
    <p class="text-base text-gray-700"><strong>Customer type:</strong> {{ data.booking.customer?.customerType }}</p>
  </div>

  <!-- Attached File -->
  <div class="p-4 shadow-sm rounded-2xl bg-green-50">
    <h4 class="font-semibold text-green-700">Attached Document</h4>
    <p *ngIf="data.attachedFile?.name; else noFile" class="text-base text-gray-700">
      {{ data.attachedFile.name }}
    </p>
    <ng-template #noFile>
      <p class="text-base italic text-gray-500">No file attached</p>
    </ng-template>
  </div>

  <!-- Summary -->
  <div class="p-4 shadow-sm rounded-2xl bg-green-50">
    <h4 class="font-semibold text-green-700">Summary</h4>

    <!-- existing discount row remains -->
    <p class="text-base text-gray-700">
      <strong>Discount rate:</strong> {{ data.booking.discountRate || 0 }}
    </p>

    <!-- NEW rows: total days, total booking price, discount amount, net amount -->
    <p class="text-base text-gray-700">
      <strong>Total days:</strong> {{ totalDays }}
    </p>

    <p class="text-base text-gray-700">
      <strong>Activity price (per day):</strong> {{ activityPrice | number:'1.0-0' }} TZS
    </p>

    <p class="text-base text-gray-700">
      <strong>Optional service price (per day / flat):</strong> {{ optionalPrice | number:'1.0-0' }} TZS
    </p>

    <p class="text-base text-gray-700">
      <strong>Total booking price:</strong> {{ totalBookingPrice | number:'1.0-0' }} TZS
    </p>

    <p class="text-base text-gray-700">
      <strong>Discount amount:</strong> {{ discountAmount | number:'1.0-0' }} TZS
    </p>

    <p class="text-base text-gray-700">
      <strong>Total after discount:</strong> {{ netAmount | number:'1.0-0' }} TZS
    </p>
  </div>

  <!-- Error -->
  <div *ngIf="errorMessage" class="mt-2 text-sm font-medium text-red-600">
    {{ errorMessage }}
  </div>

  <!-- Terms Checkbox -->
  <mat-checkbox [(ngModel)]="accepted" class="mt-3 text-gray-700">
    I accept the
    <a href="/agreeterms" target="_blank" class="text-green-600 underline">
      terms & conditions
    </a>
  </mat-checkbox>
</mat-dialog-content>

<!-- Actions -->
<mat-dialog-actions align="end" class="mt-6 space-x-3">
  <button mat-button (click)="close(false)" [disabled]="submitting"
    class="px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-100">
    Cancel
  </button>
  <button mat-flat-button color="primary" (click)="confirmAndSubmit()" 
    [disabled]="!accepted || submitting"
    class="px-4 py-2 font-medium text-white bg-green-500 rounded-lg hover:bg-green-600">
    <span *ngIf="!submitting">Confirm & Submit</span>
    <span *ngIf="submitting" class="flex items-center">
      <mat-progress-spinner diameter="18" mode="indeterminate"></mat-progress-spinner>
      &nbsp;Submitting...
    </span>
  </button>
</mat-dialog-actions>
