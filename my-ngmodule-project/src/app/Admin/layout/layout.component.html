<!-- src/app/Admin/layout/layout.component.html -->

<!-- TOP HEADER (separated from sidenav functionality) -->
<mat-toolbar
  color="primary"
  class="fixed inset-x-0 top-0 z-50 h-14 px-3 lg:px-6 text-white flex items-center"
  style="background: linear-gradient(0deg,#0c1429 0%, #0c1429 100%);"
>

   <!-- Desktop collapse/expand control -->
  <button
    mat-icon-button
    class="hidden lg:inline-flex mr-3"
    (click)="toggleSidebarDesktop()"
    [attr.aria-label]="isSidebarExpanded ? 'Collapse sidebar' : 'Expand sidebar'"
  >
    <mat-icon>{{ isSidebarExpanded ? 'chevron_left' : 'chevron_right' }}</mat-icon>
  </button>
  
  <!-- Mobile sidebar toggle (hamburger) -->
  <button
    mat-icon-button
    class="lg:hidden mr-2"
    (click)="toggleSidebarMobile()"
    [attr.aria-label]="'Toggle sidebar (mobile)'"
  >
    <mat-icon>menu</mat-icon>
  </button>

  

  <!-- Title / Could be converted to navbar later -->
  <div class="flex items-center gap-3 grow">
    <h1 class="text-sm sm:text-lg font-semibold leading-none">ZSSF HALL RESERVATION</h1>
    <h2 class="hidden sm:inline font-bold  text-slate-300">Admin Panel</h2>
  </div>

  <!-- Right-side user & quick actions -->
  <div class="flex items-center gap-2">
    <div class="flex items-center gap-2 pl-2">
      <div class="hidden sm:flex flex-col text-right mr-2">
        <span class="text-xs text-slate-200">{{ adminId || 'Admin' }}</span>
        <span class="text-[10px] text-slate-400">{{ role || '' }}</span>
      </div>
      <div class="w-8 h-8 rounded-full bg-indigo-500 flex items-center justify-center font-bold uppercase text-sm">
        {{ adminId ? adminId.charAt(0) : '?' }}
      </div>
    </div>
  </div>
</mat-toolbar>

<!-- WRAPPER (sidebar + content) -->
<div class="flex pt-14 h-screen overflow-hidden">

  <!-- SIDEBAR -->
  <aside
    class="z-40 fixed left-0 top-14 bottom-0 bg-slate-900 text-white border-r border-slate-800 transition-all duration-300 ease-in-out"
    [ngClass]="{
      'w-64': isSidebarExpanded && !isMobile,
      'w-16': !isSidebarExpanded && !isMobile,
      'translate-x-0': isMobile && isSidebarOpen,
      '-translate-x-full': isMobile && !isSidebarOpen
    }"
    style="will-change: transform, width;"
  >
    <div class="flex flex-col h-full">
      <!-- Logo / small header inside sidebar -->
      <div class="flex items-center gap-3 px-4 py-3 border-b border-slate-800">
        <div class="w-8 h-8 rounded bg-indigo-600 flex items-center justify-center font-bold">Z</div>
        <div *ngIf="isSidebarExpanded" class="ml-1">
          <div class="text-sm font-semibold">ZSSF</div>
          <div class="text-xs text-slate-400">Venue Reservations</div>
        </div>
      </div>

      <!-- Navigation list -->
      <nav class="flex-1 overflow-auto py-3 px-2">
        <a
          *ngFor="let item of navItems"
          [routerLink]="item.link"
          routerLinkActive="bg-indigo-600"
          [routerLinkActiveOptions]="{ exact: true }"
          class="nav-link flex items-center gap-3 px-3 py-2 rounded-md hover:bg-indigo-500 transition-colors duration-150"
          [attr.title]="!isSidebarExpanded ? item.label : null"
        >
          <mat-icon class="text-lg">{{ item.icon }}</mat-icon>
          <span *ngIf="isSidebarExpanded" class="truncate">{{ item.label }}</span>
        </a>
      </nav>

      <!-- bottom area: dashboard switcher and logout -->
      <div class="px-3 pb-4">
        <div class="mb-3">
          <div *ngIf="isSidebarExpanded">
            <app-dashboard-switch></app-dashboard-switch>
          </div>
          <div *ngIf="!isSidebarExpanded" class="flex justify-center">
            <app-dashboard-switch></app-dashboard-switch>
          </div>
        </div>

        <div>
          <button
            (click)="logout()"
            class="w-full flex items-center justify-center gap-2 rounded-md bg-red-600 hover:bg-red-700 text-white px-3 py-2 transition-colors"
            [attr.aria-label]="'Logout'"
          >
            <mat-icon>logout</mat-icon>
            <span *ngIf="isSidebarExpanded">Logout</span>
          </button>
        </div>
      </div>
    </div>
  </aside>

  <!-- Mobile overlay (when sidebar open) -->
  <div
    *ngIf="isMobile && isSidebarOpen"
    class="fixed inset-0 z-30 bg-black/50 lg:hidden"
    (click)="toggleSidebarMobile()"
    aria-hidden="true"
  ></div>

  <!-- MAIN CONTENT (auto-resizes with sidebar width) -->
  <main
    class="flex-1 overflow-y-auto transition-all duration-300"
    [ngStyle]="{
      'margin-left': (isMobile ? '0px' : (isSidebarExpanded ? '16rem' : '4rem'))
    }"
  >
    <div class="min-h-full p-4 bg-slate-100 dark:bg-slate-200">
      <router-outlet></router-outlet>
    </div>
  </main>
</div>
